<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="UTF-8">
        <title>Promise</title>
        <script>
            function wait(msg, isResolve = true) {
                return new Promise((resolve, reject) => {
                    setTimeout(() => {
                        if (isResolve) {
                            resolve(msg);
                        } else {
                            reject(`error (${msg}`);
                        }
                    }, 100);
                });
            };

            async function exec() {
                console.log('--- 処理開始 ---');

                console.log(await wait('処理A'));
                console.log(await wait('処理B'));

                try {
                    console.log(await wait('処理C', false));
                    console.log(await wait('処理D'));
                } catch(e) {
                    console.log('例外発生', e);
                }

                console.log('--- 処理終了 ---');
            };

            exec();
        </script>
    </head>
</html>