<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà - The Watchers Protocol</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Orbitron:wght@400;700;900&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Share Tech Mono', monospace;
            background: #000;
            overflow: hidden;
            color: #00ff41;
            cursor: none;
            user-select: none;
        }

        #container {
            position: relative;
            width: 100vw;
            height: 100vh;
        }

        #canvas-container {
            width: 100%;
            height: 100%;
            filter: contrast(1.2) brightness(1.1);
        }

        /* „Ç´„Çπ„Çø„É†„Ç´„Éº„ÇΩ„É´ */
        .cursor {
            position: absolute;
            width: 20px;
            height: 20px;
            border: 2px solid #00ff41;
            border-radius: 50%;
            pointer-events: none;
            z-index: 10000;
            transition: all 0.1s ease;
            box-shadow: 0 0 20px #00ff41;
        }

        .cursor::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 4px;
            height: 4px;
            background: #00ff41;
            border-radius: 50%;
        }

        /* ÁßòÂØÜ„ÅÆ„Ç∞„É™„ÉÉ„Éâ */
        .matrix-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.03;
            z-index: 1;
            background-image: 
                linear-gradient(rgba(0,255,65,0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0,255,65,0.1) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: matrix-scroll 20s linear infinite;
        }

        @keyframes matrix-scroll {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }

        /* „Éò„ÉÉ„ÉÄ„Éº - ÊöóÂè∑ÂåñÈ¢® */
        .header {
            position: absolute;
            top: 15px;
            left: 15px;
            right: 15px;
            z-index: 100;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .title {
            font-size: 28px;
            font-weight: 900;
            font-family: 'Orbitron', monospace;
            color: #00ff41;
            text-shadow: 0 0 30px #00ff41;
            animation: title-glitch 4s infinite;
        }

        @keyframes title-glitch {
            0%, 90%, 100% { 
                color: #00ff41;
                text-shadow: 0 0 30px #00ff41;
            }
            95% { 
                color: #ff0041;
                text-shadow: 0 0 30px #ff0041;
                transform: translateX(2px);
            }
        }

        .classified-data {
            background: rgba(0, 0, 0, 0.9);
            border: 1px solid #00ff41;
            padding: 8px 12px;
            font-size: 11px;
            color: #00ff41;
            opacity: 0.8;
            animation: data-flicker 3s infinite;
        }

        @keyframes data-flicker {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 0.3; }
        }

        /* Â∑¶„Éë„Éç„É´ - Âü∫Êú¨Âà∂Âæ° */
        .control-panel {
            position: absolute;
            left: 15px;
            top: 45%;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.95);
            border: 1px solid #00ff41;
            padding: 15px;
            box-shadow: 0 0 30px rgba(0, 255, 65, 0.2);
            min-width: 180px;
            backdrop-filter: blur(5px);
        }

        /* Âè≥„Éë„Éç„É´ - Ê©üÂØÜÊ©üËÉΩ */
        .classified-panel {
            position: absolute;
            right: 15px;
            top: 45%;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.95);
            border: 1px solid #ff0041;
            padding: 15px;
            box-shadow: 0 0 30px rgba(255, 0, 65, 0.2);
            min-width: 200px;
            backdrop-filter: blur(5px);
        }

        /* Èö†„Åï„Çå„Åü„Éë„Éç„É´ */
        .hidden-panel {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.98);
            border: 2px solid #ff4100;
            padding: 20px;
            box-shadow: 0 0 50px rgba(255, 65, 0, 0.5);
            opacity: 0;
            visibility: hidden;
            transition: all 0.5s ease;
            z-index: 1000;
            max-width: 400px;
        }

        .hidden-panel.active {
            opacity: 1;
            visibility: visible;
        }

        /* „Çª„ÇØ„Ç∑„Éß„É≥ */
        .section {
            margin-bottom: 15px;
        }

        .section h3 {
            font-size: 12px;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
            opacity: 0.9;
        }

        .classified-section h3 {
            color: #ff0041;
        }

        .entity-section h3 {
            color: #00ff41;
        }

        .void-section h3 {
            color: #ff4100;
        }

        /* „Éú„Çø„É≥ */
        .btn {
            background: rgba(0, 255, 65, 0.1);
            border: 1px solid #00ff41;
            color: #00ff41;
            padding: 6px 10px;
            border-radius: 3px;
            cursor: none;
            transition: all 0.3s ease;
            font-family: 'Share Tech Mono', monospace;
            font-size: 11px;
            text-transform: uppercase;
            margin: 2px;
            display: inline-block;
            width: calc(50% - 4px);
        }

        .btn:hover {
            background: rgba(0, 255, 65, 0.2);
            box-shadow: 0 0 15px rgba(0, 255, 65, 0.3);
        }

        .btn.active {
            background: #00ff41;
            color: #000;
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.8);
        }

        .classified-btn {
            background: rgba(255, 0, 65, 0.1);
            border: 1px solid #ff0041;
            color: #ff0041;
            width: 100%;
            margin-bottom: 8px;
        }

        .classified-btn:hover {
            background: rgba(255, 0, 65, 0.2);
            box-shadow: 0 0 15px rgba(255, 0, 65, 0.3);
        }

        .void-btn {
            background: rgba(255, 65, 0, 0.1);
            border: 1px solid #ff4100;
            color: #ff4100;
            width: 100%;
            margin-bottom: 8px;
        }

        .void-btn:hover {
            background: rgba(255, 65, 0, 0.2);
            box-shadow: 0 0 15px rgba(255, 65, 0, 0.3);
        }

        /* ÊöóÂè∑ÂÖ•Âäõ */
        .cipher-input {
            background: transparent;
            border: 1px solid #ff0041;
            color: #ff0041;
            padding: 8px;
            font-family: 'Share Tech Mono', monospace;
            font-size: 12px;
            width: 100%;
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        .cipher-input::placeholder {
            color: rgba(255, 0, 65, 0.5);
        }

        /* „Ç´„É©„Éº„Éî„ÉÉ„Ç´„Éº */
        .color-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 4px;
            margin-bottom: 10px;
        }

        .color-btn {
            width: 25px;
            height: 25px;
            border: 1px solid #00ff41;
            cursor: none;
            transition: all 0.3s ease;
        }

        .color-btn:hover {
            transform: scale(1.2);
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
        }

        .color-btn.active {
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.8);
            transform: scale(1.3);
        }

        /* Â∫ïÈÉ®Âà∂Âæ° */
        .bottom-controls {
            position: absolute;
            bottom: 15px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .quantum-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: radial-gradient(circle, #00ff41, #004411);
            border: 2px solid #00ff41;
            color: #000;
            font-size: 18px;
            cursor: none;
            transition: all 0.3s ease;
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.3);
        }

        .quantum-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 0 30px rgba(0, 255, 65, 0.6);
        }

        /* „Ç¢„É©„Éº„ÉàÈÄöÁü• */
        .alert-system {
            position: absolute;
            top: 80px;
            right: 15px;
            background: rgba(255, 0, 65, 0.9);
            color: #fff;
            padding: 12px 15px;
            font-size: 11px;
            opacity: 0;
            transform: translateX(100px);
            transition: all 0.5s ease;
            max-width: 280px;
            border-left: 4px solid #ff0041;
        }

        .alert-system.show {
            opacity: 1;
            transform: translateX(0);
        }

        .alert-system.classified {
            background: rgba(255, 65, 0, 0.9);
            border-left-color: #ff4100;
        }

        /* Áõ£Ë¶ñ„Ç´„É°„É© UI */
        .surveillance {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(0, 0, 0, 0.9);
            border: 1px solid #00ff41;
            padding: 8px;
            font-size: 10px;
            color: #00ff41;
            min-width: 120px;
        }

        .surveillance::before {
            content: '‚óè REC';
            color: #ff0041;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }

        /* ÁßòÂØÜ„ÅÆ„Çπ„Ç≠„É£„É≥„É©„Ç§„É≥ */
        .scanline {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, #00ff41, transparent);
            animation: scan 2s linear infinite;
            z-index: 1000;
            opacity: 0.7;
        }

        @keyframes scan {
            0% { top: 0; opacity: 1; }
            100% { top: 100vh; opacity: 0; }
        }

        /* ÊöóÂè∑„ÉÜ„Ç≠„Çπ„Éà */
        .encrypted-text {
            font-family: 'Share Tech Mono', monospace;
            font-size: 10px;
            color: rgba(0, 255, 65, 0.6);
            animation: decrypt 8s infinite;
        }

        @keyframes decrypt {
            0%, 80% { 
                content: "‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà";
                color: rgba(255, 0, 65, 0.8);
            }
            90%, 100% { 
                color: rgba(0, 255, 65, 0.8);
            }
        }

        /* Èö†„Åï„Çå„ÅüË¶ÅÁ¥† */
        .easter-egg {
            position: absolute;
            bottom: 5px;
            left: 5px;
            font-size: 8px;
            color: rgba(255, 255, 255, 0.1);
            cursor: none;
        }

        .easter-egg:hover {
            color: #ff4100;
        }

        /* „É¨„Çπ„Éù„É≥„Ç∑„Éñ */
        @media (max-width: 768px) {
            .control-panel, .classified-panel {
                position: fixed;
                bottom: 0;
                top: auto;
                transform: none;
                width: calc(50% - 20px);
                left: 10px;
            }
            
            .classified-panel {
                left: auto;
                right: 10px;
            }
            
            .title {
                font-size: 20px;
            }
        }

        /* ÁâπÊÆä„Ç®„Éï„Çß„ÇØ„Éà */
        .distortion {
            filter: hue-rotate(180deg) invert(1);
            animation: distort 0.5s ease-out;
        }

        @keyframes distort {
            0% { filter: hue-rotate(0deg) invert(0); }
            50% { filter: hue-rotate(180deg) invert(1); }
            100% { filter: hue-rotate(0deg) invert(0); }
        }

        .phase-shift {
            animation: phase 3s ease-in-out;
        }

        @keyframes phase {
            0%, 100% { transform: scale(1) rotate(0deg); }
            33% { transform: scale(0.5) rotate(120deg); }
            66% { transform: scale(1.5) rotate(240deg); }
        }

        /* Ë≠¶Âëä„Éï„É©„ÉÉ„Ç∑„É• */
        .warning-flash {
            animation: warning 0.2s infinite;
        }

        @keyframes warning {
            0%, 100% { background-color: transparent; }
            50% { background-color: rgba(255, 0, 0, 0.1); }
        }
    </style>
</head>
<body>
    <div id="container">
        <div id="canvas-container"></div>
        
        <!-- „Ç´„Çπ„Çø„É†„Ç´„Éº„ÇΩ„É´ -->
        <div class="cursor" id="cursor"></div>
        
        <!-- „Éû„Éà„É™„ÉÉ„ÇØ„ÇπËÉåÊôØ -->
        <div class="matrix-bg"></div>
        
        <!-- „Çπ„Ç≠„É£„É≥„É©„Ç§„É≥ -->
        <div class="scanline"></div>
        
        <!-- „Éò„ÉÉ„ÉÄ„Éº -->
        <div class="header">
            <div class="title" id="main-title">NEXUS-7</div>
            <div class="classified-data">
                <div>CLEARANCE: <span id="clearance-level">DENIED</span></div>
                <div>ENTITIES: <span id="entity-count">01</span></div>
                <div>THREAT: <span id="threat-level">MINIMAL</span></div>
            </div>
        </div>

        <!-- Áõ£Ë¶ñ„Ç∑„Çπ„ÉÜ„É† -->
        <div class="surveillance">
            <div style="margin-bottom: 5px;">CAM-001 ACTIVE</div>
            <div>COORD: <span id="coordinates">000.000</span></div>
            <div>ANOMALY: <span id="anomaly-detector">NONE</span></div>
        </div>

        <!-- Âü∫Êú¨Âà∂Âæ°„Éë„Éç„É´ -->
        <div class="control-panel">
            <div class="section entity-section">
                <h3>‚¨¢ ENTITY</h3>
                <button class="btn active" onclick="manifestEntity('cube')">CUBE</button>
                <button class="btn" onclick="manifestEntity('sphere')">SPHERE</button>
                <button class="btn" onclick="manifestEntity('pyramid')">PRISM</button>
                <button class="btn" onclick="manifestEntity('torus')">TORUS</button>
                <button class="btn" onclick="manifestEntity('crystal')">CRYSTAL</button>
                <button class="btn" onclick="manifestEntity('void')">VOID</button>
            </div>

            <div class="section entity-section">
                <h3>‚¨¢ SIGNATURE</h3>
                <div class="color-grid">
                    <div class="color-btn active" style="background: #00ff41;" onclick="alterSignature('#00ff41')"></div>
                    <div class="color-btn" style="background: #0088ff;" onclick="alterSignature('#0088ff')"></div>
                    <div class="color-btn" style="background: #ff0041;" onclick="alterSignature('#ff0041')"></div>
                    <div class="color-btn" style="background: #ffff00;" onclick="alterSignature('#ffff00')"></div>
                    <div class="color-btn" style="background: #ff4100;" onclick="alterSignature('#ff4100')"></div>
                    <div class="color-btn" style="background: #8800ff;" onclick="alterSignature('#8800ff')"></div>
                    <div class="color-btn" style="background: #ffffff;" onclick="alterSignature('#ffffff')"></div>
                    <div class="color-btn" style="background: #ff0088;" onclick="alterSignature('#ff0088')"></div>
                </div>
            </div>

            <div class="section entity-section">
                <h3>‚¨¢ SYSTEM</h3>
                <button class="btn" onclick="duplicateEntity()">DUPLICATE</button>
                <button class="btn" onclick="purgeAll()">PURGE</button>
            </div>
        </div>

        <!-- Ê©üÂØÜÂà∂Âæ°„Éë„Éç„É´ -->
        <div class="classified-panel">
            <div class="section classified-section">
                <h3>‚ö† CLASSIFIED</h3>
                <input type="text" class="cipher-input" placeholder="ENTER CIPHER" id="cipher-input" onkeydown="checkCipher(event)">
                <button class="classified-btn" onclick="initiateLockdown()">LOCKDOWN</button>
                <button class="classified-btn" onclick="activatePhase()">PHASE ‚ñà‚ñà‚ñà</button>
                <button class="classified-btn" onclick="summonWatcher()">SUMMON ‚ñà‚ñà‚ñà‚ñà</button>
                <button class="classified-btn" onclick="breachReality()">BREACH ‚ñà‚ñà‚ñà‚ñà</button>
                <button class="classified-btn" onclick="activateProtocol()">PROTOCOL-X</button>
            </div>

            <div class="section classified-section">
                <h3>‚ö† ANOMALY</h3>
                <button class="classified-btn" onclick="detectAnomaly()">SCAN ZONE</button>
                <button class="classified-btn" onclick="temporalShift()">TIME ‚ñà‚ñà‚ñà‚ñà</button>
            </div>
        </div>

        <!-- Èö†„Åï„Çå„Åü„Éë„Éç„É´ -->
        <div class="hidden-panel" id="void-panel">
            <div class="section void-section">
                <h3>‚ñà THE VOID SPEAKS ‚ñà</h3>
                <div class="encrypted-text" style="margin-bottom: 15px;">
                    ‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñà ‚ñà‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà<br>
                    ‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà<br>
                    <span style="color: #ff4100;">THEY ARE WATCHING</span>
                </div>
                <button class="void-btn" onclick="acceptVoid()">ACCEPT THE VOID</button>
                <button class="void-btn" onclick="resistVoid()">RESIST</button>
                <button class="void-btn" onclick="closeVoidPanel()">ESCAPE</button>
            </div>
        </div>

        <!-- Â∫ïÈÉ®Âà∂Âæ° -->
        <div class="bottom-controls">
            <button class="quantum-btn" onclick="toggleQuantumField()" id="quantum-btn">‚óâ</button>
            <div style="color: #00ff41; font-size: 11px; margin: 0 15px;">
                QUANTUM FIELD: <span id="field-status">STABLE</span>
            </div>
            <button class="btn" onclick="resetMatrix()">RESET MATRIX</button>
        </div>

        <!-- „Ç¢„É©„Éº„Éà„Ç∑„Çπ„ÉÜ„É† -->
        <div class="alert-system" id="alert-system"></div>

        <!-- „Ç§„Éº„Çπ„Çø„Éº„Ç®„ÉÉ„Ç∞ -->
        <div class="easter-egg" onclick="activateEasterEgg()">
            ‚¨¢ v7.3.‚ñà ‚¨¢
        </div>
    </div>

    <script>
        // „Ç∞„É≠„Éº„Éê„É´Â§âÊï∞
        let scene, camera, renderer, currentObject;
        let isQuantumActive = true;
        let currentShape = 'cube';
        let currentSignature = '#00ff41';
        let entities = [];
        let watchers = [];
        let clearanceLevel = 0;
        let anomalyCount = 0;
        let threatLevel = 1;
        
        // ÊöóÂè∑„Ç≠„Éº
        const cipherKeys = ['NEXUS', 'VOID', 'WATCHER', 'BREACH', 'PROTOCOL'];
        let unlockedCiphers = [];
        
        // „Éû„Ç¶„ÇπÂà∂Âæ°
        let mouseX = 0, mouseY = 0;
        let isMouseDown = false;
        let cameraAngleX = 0, cameraAngleY = 0;
        let cameraDistance = 8;
        
        // „Éü„Çπ„ÉÜ„É™„Ç¢„Çπ„É°„ÉÉ„Çª„Éº„Ç∏
        const classifiedMessages = [
            "‚ö† UNAUTHORIZED ACCESS DETECTED",
            "üëÅ SURVEILLANCE SYSTEM ACTIVATED",
            "üîí CLASSIFIED DATA BREACH ATTEMPT",
            "‚ö° QUANTUM INTERFERENCE DETECTED",
            "üåÄ DIMENSIONAL RIFT OPENING",
            "üëΩ UNKNOWN SIGNATURE DETECTED",
            "‚ö† REALITY ANCHOR FAILING",
            "üï≥ VOID ENTITIES APPROACHING",
            "‚ö† TEMPORAL ANOMALY IN SECTOR 7",
            "üëÅ THE WATCHERS HAVE NOTICED YOU"
        ];

        const voidMessages = [
            "‚ñà YOU CANNOT ESCAPE ‚ñà",
            "‚ñà WE HAVE BEEN WAITING ‚ñà",
            "‚ñà THE VOID CALLS TO YOU ‚ñà",
            "‚ñà RESISTANCE IS FUTILE ‚ñà",
            "‚ñà JOIN US IN THE DARKNESS ‚ñà"
        ];

        // ÂàùÊúüÂåñ
        function init() {
            const container = document.getElementById('canvas-container');
            
            // „Ç∑„Éº„É≥‰ΩúÊàê
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x000000);
            scene.fog = new THREE.Fog(0x000000, 5, 25);
            
            // „Ç´„É°„É©‰ΩúÊàê
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(0, 0, 8);
            
            // „É¨„É≥„ÉÄ„É©„Éº‰ΩúÊàê
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = THREE.PCFSoftShadowMap;
            container.appendChild(renderer.domElement);
            
            // ÂàùÊúüË®≠ÂÆö
            setupLights();
            createQuantumField();
            manifestEntity('cube');
            setupEventListeners();
            startSurveillance();
            initiateMysteriousEvents();
            
            // „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ÈñãÂßã
            animate();
        }

        // „É©„Ç§„ÉàË®≠ÂÆö
        function setupLights() {
            const ambientLight = new THREE.AmbientLight(0x001100, 0.2);
            scene.add(ambientLight);
            
            const mainLight = new THREE.DirectionalLight(0x00ff41, 0.8);
            mainLight.position.set(8, 8, 5);
            mainLight.castShadow = true;
            scene.add(mainLight);
            
            // „Ç¶„Ç©„ÉÉ„ÉÅ„É£„Éº„É©„Ç§„Éà
            const watcherLight = new THREE.PointLight(0xff0041, 1, 15);
            watcherLight.position.set(-6, 4, 6);
            scene.add(watcherLight);
            
            const voidLight = new THREE.PointLight(0xff4100, 0.5, 20);
            voidLight.position.set(6, -4, -6);
            scene.add(voidLight);
        }

        // ÈáèÂ≠ê„Éï„Ç£„Éº„É´„Éâ
        function createQuantumField() {
            const fieldGeometry = new THREE.BufferGeometry();
            const fieldCount = 300;
            const positions = new Float32Array(fieldCount * 3);
            
            for (let i = 0; i < fieldCount * 3; i += 3) {
                positions[i] = (Math.random() - 0.5) * 40;
                positions[i + 1] = (Math.random() - 0.5) * 40;
                positions[i + 2] = (Math.random() - 0.5) * 40;
            }
            
            fieldGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
            
            const fieldMaterial = new THREE.PointsMaterial({
                color: 0x00ff41,
                size: 0.05,
                transparent: true,
                opacity: 0.6,
                blending: THREE.AdditiveBlending
            });
            
            const quantumField = new THREE.Points(fieldGeometry, fieldMaterial);
            scene.add(quantumField);
            quantumField.userData = { isQuantumField: true };
        }

        // „Ç®„É≥„ÉÜ„Ç£„ÉÜ„Ç£‰ΩúÊàê
        function manifestEntity(shape, isWatcher = false) {
            if (!isWatcher && currentObject) {
                scene.remove(currentObject);
                currentObject.geometry.dispose();
                currentObject.material.dispose();
            }
            
            let geometry;
            switch (shape) {
                case 'cube':
                    geometry = new THREE.BoxGeometry(2, 2, 2);
                    break;
                case 'sphere':
                    geometry = new THREE.SphereGeometry(1.5, 32, 32);
                    break;
                case 'pyramid':
                    geometry = new THREE.ConeGeometry(1.5, 3, 8);
                    break;
                case 'torus':
                    geometry = new THREE.TorusGeometry(1.5, 0.5, 16, 100);
                    break;
                case 'crystal':
                    geometry = new THREE.OctahedronGeometry(2, 0);
                    break;
                case 'void':
                    geometry = new THREE.IcosahedronGeometry(1.8, 2);
                    break;
                case 'watcher':
                    geometry = new THREE.SphereGeometry(0.8, 32, 32);
                    break;
            }
            
            const materialColor = isWatcher ? '#ff0041' : currentSignature;
            const material = new THREE.MeshPhysicalMaterial({
                color: new THREE.Color(materialColor),
                metalness: isWatcher ? 0.8 : 0.3,
                roughness: isWatcher ? 0.1 : 0.2,
                transparent: true,
                opacity: isWatcher ? 0.7 : 0.9,
                emissive: new THREE.Color(materialColor),
                emissiveIntensity: isWatcher ? 0.3 : 0.1
            });
            
            const entity = new THREE.Mesh(geometry, material);
            entity.castShadow = true;
            entity.receiveShadow = true;
            
            if (isWatcher) {
                entity.position.set(
                    (Math.random() - 0.5) * 20,
                    (Math.random() - 0.5) * 15,
                    (Math.random() - 0.5) * 20
                );
                entity.userData = {
                    isWatcher: true,
                    watchTarget: currentObject,
                    animationOffset: Math.random() * Math.PI * 2,
                    rotationSpeed: (Math.random() - 0.5) * 0.03
                };
                watchers.push(entity);
                threatLevel++;
            } else {
                currentShape = shape;
                currentObject = entity;
                entities = [currentObject];
            }
            
            scene.add(entity);
            updateSurveillance();
            return entity;
        }

        // Ê©üÂØÜÊ©üËÉΩ
        function checkCipher(event) {
            if (event.key === 'Enter') {
                const input = event.target.value.toUpperCase();
                if (cipherKeys.includes(input) && !unlockedCiphers.includes(input)) {
                    unlockedCiphers.push(input);
                    clearanceLevel++;
                    document.getElementById('clearance-level').textContent = `LEVEL-${clearanceLevel}`;
                    triggerAlert(`üîì CIPHER ACCEPTED: ${input}`, 'classified');
                    
                    if (clearanceLevel >= 3) {
                        document.getElementById('main-title').textContent = '‚ñà NEXUS-‚ñà‚ñà‚ñà‚ñà ‚ñà';
                        triggerAlert('‚ö† MAXIMUM CLEARANCE ACHIEVED', 'classified');
                    }
                } else {
                    triggerAlert('‚ùå INVALID CIPHER', 'show');
                }
                event.target.value = '';
            }
        }

        function initiateLockdown() {
            if (clearanceLevel < 1) {
                triggerAlert('‚ùå INSUFFICIENT CLEARANCE', 'show');
                return;
            }
            
            document.body.classList.add('warning-flash');
            scene.background = new THREE.Color(0x330000);
            
            setTimeout(() => {
                document.body.classList.remove('warning-flash');
                scene.background = new THREE.Color(0x000000);
            }, 3000);
            
            triggerAlert('üîí LOCKDOWN INITIATED - ALL SYSTEMS SECURED', 'classified');
        }

        function activatePhase() {
            if (clearanceLevel < 2) {
                triggerAlert('‚ùå INSUFFICIENT CLEARANCE', 'show');
                return;
            }
            
            const container = document.getElementById('container');
            container.classList.add('phase-shift');
            
            // ÂÖ®„Ç®„É≥„ÉÜ„Ç£„ÉÜ„Ç£„Çí‰ΩçÁõ∏Â§âÊèõ
            entities.concat(watchers).forEach(entity => {
                if (entity) {
                    entity.material.opacity = 0.3;
                    entity.position.multiplyScalar(0.5);
                }
            });
            
            setTimeout(() => {
                container.classList.remove('phase-shift');
                entities.concat(watchers).forEach(entity => {
                    if (entity) {
                        entity.material.opacity = 0.9;
                        entity.position.multiplyScalar(2);
                    }
                });
            }, 3000);
            
            triggerAlert('üåÄ PHASE SHIFT COMPLETE', 'classified');
        }

        function summonWatcher() {
            if (clearanceLevel < 1) {
                triggerAlert('‚ùå INSUFFICIENT CLEARANCE', 'show');
                return;
            }
            
            manifestEntity('watcher', true);
            triggerAlert('üëÅ WATCHER ENTITY SUMMONED', 'classified');
            document.getElementById('anomaly-detector').textContent = 'HOSTILE';
        }

        function breachReality() {
            if (clearanceLevel < 3) {
                triggerAlert('‚ùå MAXIMUM CLEARANCE REQUIRED', 'show');
                return;
            }
            
            document.getElementById('container').classList.add('distortion');
            
            // „É™„Ç¢„É™„ÉÜ„Ç£„Éñ„É™„Éº„ÉÅ„Ç®„Éï„Çß„ÇØ„Éà
            for (let i = 0; i < 5; i++) {
                setTimeout(() => {
                    const randomEntity = manifestEntity('void', true);
                    randomEntity.material.color.setHex(0xff4100);
                }, i * 200);
            }
            
            setTimeout(() => {
                document.getElementById('container').classList.remove('distortion');
            }, 2000);
            
            triggerAlert('‚ö† REALITY BREACH DETECTED - CONTAINMENT FAILING', 'classified');
            showVoidPanel();
        }

        function activateProtocol() {
            if (clearanceLevel < 2) {
                triggerAlert('‚ùå INSUFFICIENT CLEARANCE', 'show');
                return;
            }
            
            // „Éó„É≠„Éà„Ç≥„É´XÂÆüË°å
            document.getElementById('main-title').textContent = '‚ö† PROTOCOL-X ACTIVE ‚ö†';
            document.getElementById('threat-level').textContent = 'MAXIMUM';
            
            // ÂÖ®„Ç∑„Çπ„ÉÜ„É†Áï∞Â∏∏
            anomalyCount = 99;
            document.getElementById('anomaly-detector').textContent = 'CRITICAL';
            
            triggerAlert('‚ö† PROTOCOL-X ACTIVATED - ANOMALY CASCADE INITIATED', 'classified');
        }

        function detectAnomaly() {
            anomalyCount += Math.floor(Math.random() * 10) + 1;
            if (anomalyCount > 50) {
                triggerAlert('‚ö† CRITICAL ANOMALY LEVELS DETECTED', 'classified');
                document.getElementById('anomaly-detector').textContent = 'CRITICAL';
            } else {
                triggerAlert(`üì° ${anomalyCount} ANOMALIES DETECTED`, 'show');
                document.getElementById('anomaly-detector').textContent = anomalyCount.toString();
            }
        }

        function temporalShift() {
            if (clearanceLevel < 1) {
                triggerAlert('‚ùå INSUFFICIENT CLEARANCE', 'show');
                return;
            }
            
            // ÊôÇÈñìÊ≠™Êõ≤„Ç®„Éï„Çß„ÇØ„Éà
            let timeMultiplier = 0.1;
            const originalTime = Date.now;
            
            // Ë∂Ö‰ΩéÈÄüÂåñ
            setTimeout(() => {
                timeMultiplier = 5.0;
                triggerAlert('‚ö° TEMPORAL ACCELERATION DETECTED', 'classified');
                
                // Ë∂ÖÈ´òÈÄüÂåñ
                setTimeout(() => {
                    timeMultiplier = 1.0;
                    triggerAlert('üï∞ TEMPORAL FLOW NORMALIZED', 'classified');
                }, 2000);
            }, 2000);
            
            triggerAlert('‚è∞ TEMPORAL DISTORTION INITIATED', 'classified');
        }

        // „Éú„Ç§„Éâ„Éë„Éç„É´
        function showVoidPanel() {
            document.getElementById('void-panel').classList.add('active');
            triggerAlert(voidMessages[Math.floor(Math.random() * voidMessages.length)], 'classified');
        }

        function acceptVoid() {
            document.body.style.background = '#110011';
            document.getElementById('container').style.filter = 'invert(1) hue-rotate(180deg)';
            triggerAlert('‚ñà YOU HAVE JOINED THE VOID ‚ñà', 'classified');
            closeVoidPanel();
        }

        function resistVoid() {
            document.body.classList.add('warning-flash');
            setTimeout(() => {
                document.body.classList.remove('warning-flash');
            }, 1000);
            triggerAlert('‚ö† RESISTANCE DETECTED - VOID DISPLEASED', 'classified');
            closeVoidPanel();
        }

        function closeVoidPanel() {
            document.getElementById('void-panel').classList.remove('active');
        }

        // Âü∫Êú¨Ê©üËÉΩ
        function alterSignature(signature) {
            currentSignature = signature;
            if (currentObject) {
                currentObject.material.color.setHex(signature.replace('#', '0x'));
                currentObject.material.emissive.setHex(signature.replace('#', '0x'));
            }
            updateActiveColorButton(signature);
        }

        function duplicateEntity() {
            const shapes = ['cube', 'sphere', 'pyramid', 'torus', 'crystal', 'void'];
            const signatures = ['#00ff41', '#0088ff', '#ff0041', '#ffff00', '#ff4100', '#8800ff'];
            const shape = shapes[Math.floor(Math.random() * shapes.length)];
            const signature = signatures[Math.floor(Math.random() * signatures.length)];
            
            const newEntity = manifestEntity(shape, true);
            newEntity.material.color.setHex(signature.replace('#', '0x'));
        }

        function purgeAll() {
            watchers.forEach(watcher => {
                scene.remove(watcher);
                watcher.geometry.dispose();
                watcher.material.dispose();
            });
            watchers = [];
            threatLevel = 1;
            updateSurveillance();
            triggerAlert('üßπ ALL ANOMALOUS ENTITIES PURGED', 'show');
        }

        function toggleQuantumField() {
            isQuantumActive = !isQuantumActive;
            document.getElementById('field-status').textContent = isQuantumActive ? 'ACTIVE' : 'UNSTABLE';
            document.getElementById('quantum-btn').style.background = isQuantumActive ? 
                'radial-gradient(circle, #00ff41, #004411)' : 
                'radial-gradient(circle, #ff0041, #440011)';
        }

        function resetMatrix() {
            // „Åô„Åπ„Å¶„É™„Çª„ÉÉ„Éà
            purgeAll();
            manifestEntity('cube');
            clearanceLevel = 0;
            anomalyCount = 0;
            threatLevel = 1;
            cameraAngleX = 0;
            cameraAngleY = 0;
            cameraDistance = 8;
            
            document.getElementById('clearance-level').textContent = 'DENIED';
            document.getElementById('main-title').textContent = 'NEXUS-7';
            document.getElementById('threat-level').textContent = 'MINIMAL';
            document.getElementById('anomaly-detector').textContent = 'NONE';
            document.body.style.background = '#000';
            document.getElementById('container').style.filter = 'none';
            
            triggerAlert('üîÑ MATRIX RESET COMPLETE', 'show');
        }

        // „Çµ„Éº„Éô„Ç§„É©„É≥„Çπ
        function startSurveillance() {
            setInterval(() => {
                const coords = (Math.random() * 999).toFixed(3);
                document.getElementById('coordinates').textContent = coords;
                
                if (Math.random() < 0.1) {
                    triggerAlert(classifiedMessages[Math.floor(Math.random() * classifiedMessages.length)], 'show');
                }
            }, 3000);
        }

        function updateSurveillance() {
            document.getElementById('entity-count').textContent = String(entities.length + watchers.length).padStart(2, '0');
            document.getElementById('threat-level').textContent = threatLevel > 5 ? 'MAXIMUM' : 
                                                                 threatLevel > 3 ? 'HIGH' : 
                                                                 threatLevel > 1 ? 'MODERATE' : 'MINIMAL';
        }

        // „Ç¢„É©„Éº„Éà
        function triggerAlert(message, type = 'show') {
            const alert = document.getElementById('alert-system');
            alert.textContent = message;
            alert.className = `alert-system ${type}`;
            
            setTimeout(() => {
                alert.classList.remove('show', 'classified');
            }, 4000);
        }

        // „Ç§„Éº„Çπ„Çø„Éº„Ç®„ÉÉ„Ç∞
        function activateEasterEgg() {
            triggerAlert('‚¨¢ DEVELOPER MODE ACTIVATED ‚¨¢', 'classified');
            clearanceLevel = 5;
            document.getElementById('clearance-level').textContent = 'ADMIN';
            unlockedCiphers = [...cipherKeys];
        }

        // „Éü„Çπ„ÉÜ„É™„Ç¢„Çπ„Ç§„Éô„É≥„Éà
        function initiateMysteriousEvents() {
            setInterval(() => {
                if (Math.random() < 0.2) {
                    const event = classifiedMessages[Math.floor(Math.random() * classifiedMessages.length)];
                    triggerAlert(event, 'show');
                }
                
                if (Math.random() < 0.05 && clearanceLevel >= 2) {
                    showVoidPanel();
                }
            }, 8000);
        }

        // „Ç´„Éº„ÇΩ„É´ËøΩË∑°
        function setupEventListeners() {
            const cursor = document.getElementById('cursor');
            
            document.addEventListener('mousemove', (e) => {
                cursor.style.left = e.clientX + 'px';
                cursor.style.top = e.clientY + 'px';
                
                mouseX = e.clientX;
                mouseY = e.clientY;
            });
            
            const canvas = renderer.domElement;
            
            canvas.addEventListener('mousedown', (e) => {
                isMouseDown = true;
                cursor.style.transform = 'scale(1.5)';
            });
            
            canvas.addEventListener('mousemove', (e) => {
                if (!isMouseDown) return;
                
                const deltaX = e.clientX - mouseX;
                const deltaY = e.clientY - mouseY;
                
                cameraAngleY -= deltaX * 0.01;
                cameraAngleX -= deltaY * 0.01;
                cameraAngleX = Math.max(-Math.PI/2, Math.min(Math.PI/2, cameraAngleX));
                
                updateCameraPosition();
            });
            
            canvas.addEventListener('mouseup', () => {
                isMouseDown = false;
                cursor.style.transform = 'scale(1)';
            });
            
            canvas.addEventListener('wheel', (e) => {
                cameraDistance += e.deltaY * 0.01;
                cameraDistance = Math.max(3, Math.min(25, cameraDistance));
                updateCameraPosition();
            });
            
            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            });
        }

        function updateCameraPosition() {
            const x = cameraDistance * Math.cos(cameraAngleX) * Math.sin(cameraAngleY);
            const y = cameraDistance * Math.sin(cameraAngleX);
            const z = cameraDistance * Math.cos(cameraAngleX) * Math.cos(cameraAngleY);
            
            camera.position.set(x, y, z);
            camera.lookAt(0, 0, 0);
        }

        // UIÊõ¥Êñ∞
        function updateActiveButton(selector, value) {
            document.querySelectorAll(selector).forEach(btn => btn.classList.remove('active'));
            const buttons = document.querySelectorAll(selector);
            const shapes = ['cube', 'sphere', 'pyramid', 'torus', 'crystal', 'void'];
            const index = shapes.indexOf(value);
            if (index !== -1 && buttons[index]) {
                buttons[index].classList.add('active');
            }
        }

        function updateActiveColorButton(signature) {
            document.querySelectorAll('.color-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`.color-btn[style*="${signature}"]`)?.classList.add('active');
        }

        // „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥„É´„Éº„Éó
        function animate() {
            requestAnimationFrame(animate);
            
            if (isQuantumActive) {
                const time = Date.now() * 0.001;
                
                // „É°„Ç§„É≥„Ç®„É≥„ÉÜ„Ç£„ÉÜ„Ç£
                if (currentObject) {
                    currentObject.rotation.x = time * 0.5;
                    currentObject.rotation.y = time * 0.3;
                    currentObject.position.y = Math.sin(time * 2) * 0.3;
                }
                
                // „Ç¶„Ç©„ÉÉ„ÉÅ„É£„Éº
                watchers.forEach((watcher, index) => {
                    if (watcher && watcher.userData) {
                        watcher.rotation.x += watcher.userData.rotationSpeed;
                        watcher.rotation.y += watcher.userData.rotationSpeed * 0.7;
                        
                        // „Ç¶„Ç©„ÉÉ„ÉÅ„É£„Éº„ÅØÂ∏∏„Å´„É°„Ç§„É≥„Ç™„Éñ„Ç∏„Çß„ÇØ„Éà„ÇíË¶ã„Çã
                        if (currentObject) {
                            watcher.lookAt(currentObject.position);
                        }
                        
                        watcher.position.y += Math.sin(time * 3 + watcher.userData.animationOffset) * 0.02;
                    }
                });
                
                // ÈáèÂ≠ê„Éï„Ç£„Éº„É´„Éâ
                scene.children.forEach(child => {
                    if (child.userData && child.userData.isQuantumField) {
                        child.rotation.y += 0.001;
                        child.rotation.x += 0.0005;
                    }
                });
            }
            
            renderer.render(scene, camera);
        }

        // ÈñãÂßã
        init();
    </script>
</body>
</html>
